{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.filter.js\";\nimport \"core-js/modules/es.iterator.for-each.js\";\nimport axios from \"axios\";\nimport { mapState } from \"vuex\";\nexport default {\n  name: \"Cart\",\n  data() {\n    return {\n      cartItem: [],\n      itemQuantity: []\n    };\n  },\n  // created() {\n  //     this.getAllCartItem();\n  // },\n\n  mounted() {\n    this.getAllCartItem();\n  },\n  computed: {\n    ...mapState([\"allFoods\", \"user\"]),\n    filterFoods: function () {\n      return this.allFoods.filter(f => this.matchID(f, this.cartItem));\n    }\n  },\n  methods: {\n    matchID: function (food, cartArray) {\n      let temp = \"\";\n      cartArray.forEach(element => {\n        if (parseInt(food.food_id) == element) {\n          temp = food;\n        }\n      });\n      return temp;\n    },\n    calculateItemPrice: function (index) {\n      return ((parseInt(this.filterFoods[index].food_price) - parseInt(this.filterFoods[index].food_discount)) * this.itemQuantity[index]).toString();\n    },\n    calculateSummaryPrice: function () {\n      let subtotal = 0;\n      let discount = 0;\n      let delivery = 80;\n      let i = 0;\n      while (i < this.itemQuantity.length) {\n        subtotal = subtotal + parseInt(this.filterFoods[i].food_price) * this.itemQuantity[i];\n        discount = discount + parseInt(this.filterFoods[i].food_discount) * this.itemQuantity[i];\n        i = i + 1;\n      }\n      if (!this.filterFoods.length) {\n        delivery = 0;\n      }\n      let total = subtotal - discount + delivery;\n      return [subtotal, discount, delivery, total];\n    },\n    async onQtyChange(e, i) {\n      if (e.target.value < 1) {\n        e.target.value = 1;\n        this.itemQuantity[i] = 1;\n      } else {\n        this.itemQuantity[i] = e.target.value;\n      }\n      let data = {\n        user_id: parseInt(this.user.user_id),\n        food_id: parseInt(this.cartItem[i]),\n        item_qty: this.itemQuantity[i]\n      };\n      await axios.put(\"/cartItem/\", data);\n    },\n    async cancelBtn() {\n      await axios.delete(\"/cartItem/\" + this.user.user_id);\n      this.cartItem = [];\n      this.itemQuantity = [];\n    },\n    checkOutBtn: function () {\n      this.$router.push(\"/checkout\");\n    },\n    async removeBtn(index) {\n      await axios.delete(\"/cartItem/\" + this.user.user_id + \"/\" + this.cartItem[index]);\n      this.cartItem.splice(index, 1);\n      this.itemQuantity.splice(index, 1);\n    },\n    async getAllCartItem() {\n      if (this.user) {\n        let existItem = await axios.get('/cartItem/' + this.user.user_id);\n        existItem.data.forEach(element => {\n          this.cartItem.push(element.food_id);\n          this.itemQuantity.push(element.item_qty);\n        });\n      }\n    }\n  }\n};","map":{"version":3,"names":["axios","mapState","name","data","cartItem","itemQuantity","mounted","getAllCartItem","computed","filterFoods","allFoods","filter","f","matchID","methods","food","cartArray","temp","forEach","element","parseInt","food_id","calculateItemPrice","index","food_price","food_discount","toString","calculateSummaryPrice","subtotal","discount","delivery","i","length","total","onQtyChange","e","target","value","user_id","user","item_qty","put","cancelBtn","delete","checkOutBtn","$router","push","removeBtn","splice","existItem","get"],"sources":["C:\\Users\\visha\\Downloads\\vedeshi khana\\restaurant-ordering-system-master\\frontend\\src\\pages\\Cart.vue"],"sourcesContent":["<template>\n    <div class=\"shopping-cart-section\">\n\n        <div class=\"heading\">\n            <span>Shopping cart</span>\n            <h3>Good products, fast delivery</h3>\n        </div>\n\n        <div class=\"container\">\n            <div class=\"wrapper wrapper-content\">\n                <div class=\"row\">\n                    <div class=\"in-cart col-md-9\">\n                        <div class=\"box\">\n                            <div class=\"box-title item-total row\">\n                                <h3>\n                                    <p style=\"font-size: 15px;\">{{ filterFoods.length.toString() }}\n                                        <span v-if=\"filterFoods.length < 2\">item</span>\n                                        <span v-else>items</span>\n                                    </p>in your cart\n                                </h3>\n                            </div>\n\n                            <div v-if=\"!filterFoods.length\">\n                                <div class=\"box-content row no-food\">\n                                    <div class=\"content\">\n                                        <h2 style=\"color: #057835fa;\">You do not have any items in your cart, go shop\n                                            now!</h2>\n                                    </div>\n                                    <div class=\"image\">\n                                        <img src=\"../assets/images/notfound.png\" alt=\"\" />\n                                    </div>\n                                </div>\n                            </div>\n                            <div v-else>\n                                <div v-for=\"(f, index) in filterFoods\" :key=\"index\">\n                                    <div class=\"box-content row\">\n                                        <div class=\"image-box col-sm-3\" style=\"padding-left: 0;\">\n                                            <img :src=\"require(`../assets/images/${f.food_src}`)\" alt=\"\"\n                                                class=\"cart-product-img\" />\n                                        </div>\n\n                                        <div class=\"desc col-sm-4\">\n                                            <h2 class=\"item-name\">{{ f.food_name }}</h2>\n                                            <div class=\"item-desc\">\n                                                <b>Description</b>\n                                                <p>{{ f.food_desc }}</p>\n                                            </div>\n                                            <button class=\"btn remove-btn\" @click=\"removeBtn(index)\"><i\n                                                    class=\"fa fa-trash\"></i>Remove\n                                                item</button>\n                                        </div>\n\n                                        <div class=\"item-price col-sm-1\">\n                                            <span class=\"sale-price\">₹{{ parseFloat(f.food_price) -\n                                                parseFloat(f.food_discount)\n                                            }}</span>\n                                            <p class=\"text-muted first-price\"\n                                                v-if=\"parseFloat(f.food_discount) != 0.00\">\n                                                ₹{{ parseFloat(f.food_price) }}\n\n                                            </p>\n                                        </div>\n\n                                        <div class=\"item-qty col-sm-2 d-inline\">\n                                            <label for=\"iQuantity\"\n                                                style=\"font-size: 12px; padding-right: 2px;\">Quantity:</label>\n                                            <input type=\"number\" id=\"iQuantity\" class=\"form-control item-quantity\"\n                                                :value=\"itemQuantity[index]\" min=\"1\" max=\"1000\"\n                                                @change=\"onQtyChange($event, index)\">\n                                        </div>\n\n                                        <div class=\"cal-total col-sm-2\">\n                                            <h4 class=\"item-total\">₹{{calculateItemPrice(index)}}</h4>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n\n\n                        </div>\n\n                        <div class=\"box-content row\">\n                            <router-link to=\"/menu\" class=\"btn shop-btn\"><i class=\"fa fa-arrow-left\"></i>Continue\n                                shopping</router-link>\n                            <button class=\"btn check-out-btn\" style=\"margin-left: 10px;\"\n                                :disabled=\"filterFoods.length ? false : true\" @click=\"checkOutBtn()\"><i\n                                    class=\"fa fa fa-shopping-cart\"></i>Checkout</button>\n                        </div>\n                    </div>\n\n\n                    <div class=\"col-md-3\">\n                        <div class=\"box\">\n                            <div class=\"box-title\">\n                                <h3>Cart Summary</h3>\n                            </div>\n\n                            <div class=\"box-content\">\n                                <span>Summary</span>\n                                <h3 class=\"font-bold total-first-price\">₹{{ calculateSummaryPrice()[0] }}</h3>\n\n                                <span>Discount</span>\n                                <h3 class=\"font-bold total-discount\">₹{{ calculateSummaryPrice()[1] }}</h3>\n\n                                <span>Delivery fee</span>\n                                <h3 class=\"font-bold total-delivery\">₹{{ calculateSummaryPrice()[2] }}</h3>\n\n                                <hr />\n\n                                <span>Total</span>\n                                <h2 class=\"font-bold total-sale\">₹{{ calculateSummaryPrice()[3] }}</h2>\n\n                                <div class=\"btn-group\">\n                                    <button class=\"btn check-out-btn\" :disabled=\"filterFoods.length ? false : true\"\n                                        @click=\"checkOutBtn()\"><i class=\"fa fa-shopping-cart\"></i>\n                                        Checkout</button>\n                                    <button class=\"btn cancel-btn\" @click=\"cancelBtn()\"\n                                        :disabled=\"filterFoods.length ? false : true\">\n                                        Cancel</button>\n                                </div>\n                            </div>\n                        </div>\n\n                        <div class=\"box\">\n                            <div class=\"box-title\">\n                                <h3>Support</h3>\n                            </div>\n                            <div class=\"box-content text-center\">\n                                <h3><i class=\"fa fa-phone\"></i> +91 7340425065</h3>\n                                <span class=\"small\">\n                                    Please contact with us if you have any questions. We are avalible 24h.\n                                </span>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\nimport axios from \"axios\";\nimport { mapState } from \"vuex\";\nexport default {\n    name: \"Cart\",\n\n    data() {\n        return {\n            cartItem: [],\n            itemQuantity: [],\n        };\n    },\n\n    // created() {\n    //     this.getAllCartItem();\n    // },\n\n    mounted() {\n        this.getAllCartItem();\n    },\n\n    computed: {\n        ...mapState([\"allFoods\", \"user\"]),\n\n        filterFoods: function () {\n            return this.allFoods.filter(\n                (f) => this.matchID(f, this.cartItem)\n            );\n        },\n    },\n\n    methods: {\n        matchID: function (food, cartArray) {\n            let temp = \"\";\n            cartArray.forEach(element => {\n                if (parseInt(food.food_id) == element) {\n                    temp = food\n                }\n            });\n            return temp\n        },\n\n        calculateItemPrice: function (index) {\n            return ((parseInt(this.filterFoods[index].food_price) - parseInt(this.filterFoods[index].food_discount)) * this.itemQuantity[index]).toString()\n        },\n\n        calculateSummaryPrice: function () {\n            let subtotal = 0;\n            let discount = 0;\n            let delivery = 80;\n            let i = 0;\n            while (i < this.itemQuantity.length) {\n                subtotal = subtotal + parseInt(this.filterFoods[i].food_price) * this.itemQuantity[i]\n                discount = discount + parseInt(this.filterFoods[i].food_discount) * this.itemQuantity[i]\n                i = i + 1\n            }\n            if (!this.filterFoods.length) {\n                delivery = 0\n            }\n            let total = subtotal - discount + delivery;\n            return [subtotal, discount, delivery, total];\n        },\n\n        async onQtyChange(e, i) {\n            if (e.target.value < 1) {\n                e.target.value = 1\n                this.itemQuantity[i] = 1\n            } else {\n                this.itemQuantity[i] = e.target.value;\n            }\n\n            let data = {\n                user_id: parseInt(this.user.user_id),\n                food_id: parseInt(this.cartItem[i]),\n                item_qty: this.itemQuantity[i]\n            };\n            await axios.put(\"/cartItem/\", data)\n        },\n\n        async cancelBtn() {\n            await axios.delete(\"/cartItem/\" + this.user.user_id);\n\n            this.cartItem = [];\n            this.itemQuantity = [];\n        },\n\n        checkOutBtn: function () {\n            this.$router.push(\"/checkout\");\n        },\n\n        async removeBtn(index) {\n            await axios.delete(\"/cartItem/\" + this.user.user_id + \"/\" + this.cartItem[index]);\n\n            this.cartItem.splice(index, 1);\n            this.itemQuantity.splice(index, 1);\n        },\n\n        async getAllCartItem() {\n            if (this.user) {\n                let existItem = await axios.get('/cartItem/' + this.user.user_id);\n                existItem.data.forEach(element => {\n                    this.cartItem.push(element.food_id);\n                    this.itemQuantity.push(element.item_qty);\n                });\n            }\n        }\n\n\n    }\n\n}\n</script>\n\n\n<style scoped>\n.shopping-cart-section {\n    background: #fff;\n    padding: 2rem 9%;\n}\n\n.item-name {\n    color: #27ae60\n}\n\n.cart-product-img {\n    text-align: center;\n    width: 100%;\n    height: 125px;\n    object-fit: cover;\n    background-color: #f7f7f7;\n\n}\n\n.box {\n    clear: both;\n    margin: 0;\n    margin-bottom: 20px;\n    padding: 0;\n}\n\n.box:after,\n.box:before {\n    display: table;\n}\n\n.box-title {\n    background-color: inherit;\n    border-color: #e7eaec;\n    border-style: solid solid none;\n    border-width: 3px 0 0;\n    color: inherit;\n    margin-bottom: 0;\n    padding: 14px 15px 7px;\n    min-height: 78px;\n}\n\n.box-content {\n    background-color: inherit;\n    color: inherit;\n    padding: 15px 20px 20px 20px;\n    border-color: #e7eaec;\n    border-image: none;\n    border-style: solid solid none;\n    border-width: 1px 0;\n\n}\n\n.item-desc b {\n    font-size: 12px;\n}\n\n.item-desc p {\n    font-size: 10px;\n}\n\n.sale-price,\n.first-price,\n.item-quantity {\n    font-size: 12px;\n}\n\n.item-quantity {\n    width: 60px;\n    height: 15px;\n}\n\n.first-price {\n    text-decoration: line-through;\n}\n\n.remove-btn {\n    font-size: 10px;\n    padding: 5px;\n    margin-top: 27px;\n}\n\n.remove-btn i {\n    padding-right: 5px;\n}\n\n.box-content button i,\n.box-content a i {\n    padding-right: 5px;\n}\n\n.no-food {\n    text-align: center;\n    justify-content: center;\n    display: block;\n}\n\n.no-food .image img {\n    width: 200px;\n    height: 200px;\n}\n\n\n@media (max-width: 768px) {\n    .box-content .item-name {\n        font-size: 14px;\n    }\n\n    .desc button {\n        position: absolute;\n        bottom: 0;\n    }\n\n    .box-content .btn-group {\n        display: block;\n    }\n\n    .box-content .btn-group button {\n        border-radius: .5rem !important;\n    }\n\n    .box-content .btn-group button i {\n        margin-top: 3px;\n    }\n\n    .box-content .btn-group .check-out-btn {\n        display: flex;\n        margin-top: 10px;\n        margin-bottom: 10px;\n    }\n}\n\n@media (max-width: 576px) {\n\n    .box-title {\n        min-height: 48px;\n    }\n\n    .box-title.item-total {\n        border: none;\n    }\n\n    .in-cart .box-content .btn-group {\n        margin-top: 5px;\n        display: inline-flex;\n    }\n\n    .in-cart .box-content .btn-group .check-out-btn {\n        display: flex;\n        margin-top: 0px;\n        margin-right: 5px;\n        margin-bottom: 0px;\n    }\n\n    .image-box {\n        position: absolute;\n        opacity: 0.8;\n        max-width: 100%;\n        width: 100%;\n        max-height: 100%;\n        filter: brightness(60%);\n        padding: none;\n    }\n\n    .image-box img {\n        border-radius: 15px;\n\n    }\n\n    .in-cart .box-content {\n        color: white;\n        margin-left: -25px;\n        border: none;\n        display: flex;\n    }\n\n    .desc .item-name {\n        font-size: 16px;\n        filter: brightness(160%);\n    }\n\n    .desc b {\n        font-size: 10px;\n    }\n\n    .desc p {\n        font-size: 12px;\n    }\n\n    .desc .remove-btn {\n        font-size: 10px;\n        position: relative;\n\n    }\n\n    .item-price {\n        position: absolute;\n        margin-top: 55px;\n    }\n\n    .item-price .first-price {\n        display: inline;\n        padding-left: 5px;\n        color: red !important;\n    }\n\n    .item-qty {\n        position: absolute;\n        margin-top: 55px;\n        padding-left: 160px;\n    }\n\n    .cal-total {\n        display: none;\n    }\n\n    .in-cart .box-content .check-out-btn {\n        display: none;\n    }\n\n}\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}