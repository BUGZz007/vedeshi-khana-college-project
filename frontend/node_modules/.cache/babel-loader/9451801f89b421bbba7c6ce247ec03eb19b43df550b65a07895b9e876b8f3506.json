{"ast":null,"code":"import { createElementVNode as _createElementVNode, createCommentVNode as _createCommentVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString } from \"vue\";\nconst _hoisted_1 = {\n  class: \"admin-container\"\n};\nconst _hoisted_2 = {\n  class: \"d-flex justify-content-between\"\n};\nconst _hoisted_3 = {\n  class: \"table-responsive\"\n};\nconst _hoisted_4 = {\n  class: \"table colored-header datatable project-list\"\n};\nconst _hoisted_5 = [\"onClick\"];\nconst _hoisted_6 = [\"onClick\"];\nconst _hoisted_7 = [\"onClick\"];\nconst _hoisted_8 = [\"onClick\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_cache[1] || (_cache[1] = _createElementVNode(\"h1\", null, \"Vedeshi Khana\", -1 /* HOISTED */)), _createElementVNode(\"button\", {\n    class: \"btn\",\n    onClick: _cache[0] || (_cache[0] = $event => $options.handleLogout())\n  }, \"Logout\")]), _createElementVNode(\"div\", _hoisted_3, [_createCommentVNode(\" PROJECT TABLE \"), _cache[3] || (_cache[3] = _createElementVNode(\"h1\", null, \"Orders Received\", -1 /* HOISTED */)), _createElementVNode(\"table\", _hoisted_4, [_cache[2] || (_cache[2] = _createElementVNode(\"thead\", null, [_createElementVNode(\"tr\", null, [_createElementVNode(\"th\", null, \"Bill Id\"), _createElementVNode(\"th\", null, \"User Id\"), _createElementVNode(\"th\", null, \"Phone\"), _createElementVNode(\"th\", null, \"Address\"), _createElementVNode(\"th\", null, \"When\"), _createElementVNode(\"th\", null, \"Paid\"), _createElementVNode(\"th\", null, \"Total\"), _createElementVNode(\"th\", null, \"Status\"), _createElementVNode(\"th\", null, \"Action\")])], -1 /* HOISTED */)), _createElementVNode(\"tbody\", null, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($options.filterBills.slice().reverse(), b => {\n    return _openBlock(), _createElementBlock(\"tr\", {\n      key: b.bill_id\n    }, [_createElementVNode(\"td\", null, _toDisplayString(b.bill_id), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString(b.user_id), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString(b.bill_phone), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString(b.bill_address), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString(b.bill_when), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString(b.bill_paid), 1 /* TEXT */), _createElementVNode(\"td\", null, \"₹\" + _toDisplayString(b.bill_total), 1 /* TEXT */), _createElementVNode(\"td\", null, _toDisplayString($data.avaiableStatus[b.bill_status]), 1 /* TEXT */), _createElementVNode(\"td\", null, [b.bill_status < 5 ? (_openBlock(), _createElementBlock(\"button\", {\n      key: 0,\n      class: \"action-btn\",\n      onClick: $event => $options.nextStatusBtn(b.bill_id)\n    }, _toDisplayString($data.avaiableStatus[b.bill_status + 1]), 9 /* TEXT, PROPS */, _hoisted_5)) : _createCommentVNode(\"v-if\", true), b.bill_status == 1 ? (_openBlock(), _createElementBlock(\"button\", {\n      key: 1,\n      class: \"cancel-btn\",\n      onClick: $event => $options.cancelBtn(b.bill_id)\n    }, \" Cancel \", 8 /* PROPS */, _hoisted_6)) : b.bill_status == 5 && b.bill_paid == 'false' ? (_openBlock(), _createElementBlock(\"button\", {\n      key: 2,\n      class: \"paid-btn\",\n      onClick: $event => $options.paidBtn(b.bill_id)\n    }, \" Paid \", 8 /* PROPS */, _hoisted_7)) : b.bill_status == 5 && b.bill_paid == 'true' ? (_openBlock(), _createElementBlock(\"button\", {\n      key: 3,\n      class: \"action-btn\",\n      onClick: $event => $options.nextStatusBtn(b.bill_id)\n    }, _toDisplayString($data.avaiableStatus[b.bill_status + 1]), 9 /* TEXT, PROPS */, _hoisted_8)) : _createCommentVNode(\"v-if\", true)])]);\n  }), 128 /* KEYED_FRAGMENT */))])])])]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","onClick","_cache","$event","$options","handleLogout","_hoisted_3","_createCommentVNode","_hoisted_4","_Fragment","_renderList","filterBills","slice","reverse","b","key","bill_id","_toDisplayString","user_id","bill_phone","bill_address","bill_when","bill_paid","bill_total","$data","avaiableStatus","bill_status","nextStatusBtn","_hoisted_5","cancelBtn","_hoisted_6","paidBtn","_hoisted_7","_hoisted_8"],"sources":["C:\\Users\\visha\\Downloads\\vedeshi khana\\restaurant-ordering-system-master\\frontend\\src\\admin\\Dashboard.vue"],"sourcesContent":["<template>\n    <div class=\"admin-container\">\n        <div class=\"d-flex justify-content-between\">\n            <h1>Vedeshi Khana</h1>\n            <button class=\"btn\" @click=\"handleLogout()\">Logout</button>\n        </div>\n\n        <div class=\"table-responsive\">\n            <!-- PROJECT TABLE -->\n            <h1>Orders Received</h1>\n            <table class=\"table colored-header datatable project-list\">\n                <thead>\n                    <tr>\n                        <th>Bill Id</th>\n                        <th>User Id</th>\n                        <th>Phone</th>\n                        <th>Address</th>\n                        <th>When</th>\n                        <th>Paid</th>\n                        <th>Total</th>\n                        <th>Status</th>\n                        <th>Action</th>\n                    </tr>\n                </thead>\n                <tbody>\n                    <tr v-for=\"(b) in filterBills.slice().reverse()\" :key=\"b.bill_id\">\n                        <td>{{ b.bill_id }}</td>\n                        <td>{{ b.user_id }}</td>\n                        <td>{{ b.bill_phone }}</td>\n                        <td>{{ b.bill_address }}</td>\n                        <td>{{ b.bill_when }}</td>\n                        <td>{{ b.bill_paid }}</td>\n                        <td>₹{{ b.bill_total }}</td>\n                        <td>{{ avaiableStatus[b.bill_status] }}</td>\n                        <td>\n                            <button v-if=\"b.bill_status < 5\" class=\"action-btn\" @click=\"nextStatusBtn(b.bill_id)\">\n                                {{ avaiableStatus[b.bill_status + 1] }}\n                            </button>\n\n                            <button v-if=\"b.bill_status == 1\" class=\"cancel-btn\" @click=\"cancelBtn(b.bill_id)\">\n                                Cancel\n                            </button>\n\n                            <button v-else-if=\"b.bill_status == 5 && b.bill_paid == 'false'\" class=\"paid-btn\"\n                                @click=\"paidBtn(b.bill_id)\">\n                                Paid\n                            </button>\n\n                            <button v-else-if=\"b.bill_status == 5 && b.bill_paid == 'true'\" class=\"action-btn\"\n                                @click=\"nextStatusBtn(b.bill_id)\">\n                                {{ avaiableStatus[b.bill_status + 1] }}\n                            </button>\n                        </td>\n                    </tr>\n                </tbody>\n            </table>\n        </div>\n    </div>\n</template>\n\n\n<script>\nimport axios from \"axios\";\nimport { mapState, mapMutations } from \"vuex\";\nexport default {\n    name: 'Dashboard',\n\n    data() {\n        return {\n            avaiableStatus: [\"cancel\", \"confirmed\", \"preparing\", \"checking\", \"delivering\", \"delivered\", \"completed\"],\n            allBills: [],\n            showOrderDetails: false,\n            sendId: undefined,\n            interval: \"\",\n        }\n    },\n\n    // created() {\n    //     this.getAllBills();\n    //     if (!this.admin) {\n    //         this.$router.push(\"/\");\n    //     }\n    // },\n\n    mounted: function () {\n        this.getAllBills();\n        if (!this.admin) {\n            this.$router.push(\"/\");\n        }\n\n        this.autoUpdate();\n    },\n\n    beforeUnmount() {\n        clearInterval(this.interval)\n    },\n\n    computed: {\n        ...mapState([\"allFoods\", \"admin\"]),\n\n        filterBills: function () {\n            return this.allBills.filter((b) => b.bill_status < 6 && b.bill_status > 0);\n        },\n    },\n\n    methods: {\n        ...mapMutations([\"setAdmin\"]),\n\n        async getAllBills() {\n            this.allBills = (await axios.get('/billstatus')).data;\n        },\n\n        sendBillId: function (id) {\n            this.sendId = id\n            this.showOrderDetails = !this.showOrderDetails;\n        },\n\n        closeView: function () {\n            this.showOrderDetails = !this.showOrderDetails;\n        },\n\n        handleLogout: function () {\n            this.setAdmin(\"\");\n        },\n\n        async nextStatusBtn(id) {\n            await axios.put('/billstatus/' + id);\n            this.getAllBills();\n        },\n\n        async paidBtn(id) {\n            await axios.put('/billstatus/paid/' + id);\n            this.getAllBills();\n        },\n\n        async cancelBtn(id) {\n            await axios.put('/billstatus/cancel/' + id);\n            this.getAllBills();\n        },\n\n        autoUpdate: function () {\n            this.interval = setInterval(function () {\n                this.getAllBills();\n            }.bind(this), 1000);\n        }\n\n    },\n}\n</script>\n\n<style scoped>\n.admin-container {\n    background-color: #fff;\n    height: 100vh;\n    padding: 2rem 9%;\n    font-size: 16px;\n}\n\n.project-list>tbody>tr>td {\n    padding: 12px 8px;\n}\n\n.project-list>tbody>tr>td .avatar {\n    width: 22px;\n    border: 1px solid #CCC;\n}\n\n.table-responsive {\n    margin-top: 8vh;\n}\n\n.action-btn,\n.cancel-btn,\n.paid-btn {\n    width: 100px;\n    height: 25px;\n    color: white;\n    text-transform: capitalize;\n}\n\n.action-btn {\n    background-color: #0da9ef;\n    margin-right: 10px;\n}\n\n.cancel-btn,\n.paid-btn {\n    background-color: red;\n}\n\n.action-btn:hover {\n    background-color: #27ae60;\n}\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}