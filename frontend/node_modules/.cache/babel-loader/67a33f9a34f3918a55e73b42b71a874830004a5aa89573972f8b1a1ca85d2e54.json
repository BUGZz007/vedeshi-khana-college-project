{"ast":null,"code":"import \"core-js/modules/es.iterator.constructor.js\";\nimport \"core-js/modules/es.iterator.filter.js\";\nimport OrderDetails from \"@/components/OrderDetails.vue\";\nimport axios from \"axios\";\nimport { mapState } from \"vuex\";\nexport default {\n  name: 'MyOrder',\n  data() {\n    return {\n      avaiableStatus: [\"cancel\", \"confirmed\", \"preparing\", \"checking\", \"delivering\", \"delivered\"],\n      allBills: [],\n      showOrderDetails: false,\n      sendId: null,\n      interval: \"\"\n    };\n  },\n  // created() {\n  //     this.getAllBills();\n  // },\n\n  mounted: function () {\n    this.getAllBills();\n    this.autoUpdate();\n  },\n  beforeUnmount() {\n    clearInterval(this.interval);\n  },\n  computed: {\n    ...mapState([\"allFoods\", \"user\"]),\n    filterBills: function () {\n      return this.allBills.filter(b => b.bill_status < 6 && b.bill_status > 0);\n    }\n  },\n  methods: {\n    async getAllBills() {\n      if (this.user) {\n        this.allBills = (await axios.get('/billstatus/user/' + this.user.user_id)).data;\n      }\n    },\n    sendBillId: function (id) {\n      this.sendId = id;\n      this.showOrderDetails = !this.showOrderDetails;\n    },\n    closeView: function () {\n      this.showOrderDetails = !this.showOrderDetails;\n    },\n    autoUpdate: function () {\n      this.interval = setInterval(function () {\n        this.getAllBills();\n      }.bind(this), 1000);\n    }\n  },\n  components: {\n    OrderDetails\n  }\n};","map":{"version":3,"names":["OrderDetails","axios","mapState","name","data","avaiableStatus","allBills","showOrderDetails","sendId","interval","mounted","getAllBills","autoUpdate","beforeUnmount","clearInterval","computed","filterBills","filter","b","bill_status","methods","user","get","user_id","sendBillId","id","closeView","setInterval","bind","components"],"sources":["C:\\Users\\visha\\Downloads\\vedeshi khana\\restaurant-ordering-system-master\\frontend\\src\\pages\\MyOrder.vue"],"sourcesContent":["<template>\n    <div class=\"my-order-container\" :class=\"filterBills.length > 0 ? '' : 'fit-screen'\">\n        <div v-if=\"filterBills.length > 0\" class=\"my-order-cards\">\n            <div v-for=\"b in filterBills.slice().reverse()\" class=\"card\" :key=\"b.bill_id\">\n                <div class=\"card-head d-flex flex-wrap flex-sm-nowrap justify-content-between\">\n                    <div>\n                        <span>Order No - </span>\n                        <span>{{ b.bill_id }}</span>\n                    </div>\n                    <button @click=\"sendBillId(b.bill_id)\">show order details</button>\n                </div>\n\n                <div class=\"d-flex flex-wrap flex-sm-nowrap justify-content-between card-summary\">\n                    <div class=\"w-100 text-center py-1 px-2\"><span>Paid:</span>{{ \" \" + b.bill_paid }}\n                    </div>\n                    <div class=\"w-100 text-center py-1 px-2\"><span>Status:</span>{{ \" \" + avaiableStatus[b.bill_status]\n                    }}\n                    </div>\n                    <div class=\"w-100 text-center py-1 px-2\"><span>When:</span> {{ b.bill_when }}</div>\n                </div>\n                <div class=\"d-flex flex-wrap flex-sm-nowrap justify-content-between card-summary\">\n\n                    <div class=\"w-100 text-center py-1 px-2\"><span>Total:</span> â‚¹{{ b.bill_total }}</div>\n                    <div class=\"w-100 text-center py-1 px-2\"><span>Address:</span>{{ \" \" + b.bill_address }}\n                    </div>\n                    <div class=\"w-100 text-center py-1 px-2\"><span>Phone:</span>{{ \" \" + b.bill_phone }}\n                    </div>\n                </div>\n\n                <div class=\"card-body\">\n                    <div class=\"steps d-flex flex-wrap flex-sm-nowrap justify-content-between\">\n                        <div class=\"step\" :class=\"b.bill_status >= 1 ? 'completed' : ''\">\n                            <div class=\"step-icon-wrap\">\n                                <div class=\"step-icon\"><i class=\"fa-solid fa-utensils\"></i></div>\n                            </div>\n                            <h4 class=\"step-title\">Confirmed</h4>\n                        </div>\n                        <div class=\"step\" :class=\"b.bill_status >= 2 ? 'completed' : ''\">\n                            <div class=\"step-icon-wrap\">\n                                <div class=\"step-icon\"><i class=\"fa-solid fa-fire-burner\"></i></div>\n                            </div>\n                            <h4 class=\"step-title\">Preparing</h4>\n                        </div>\n                        <div class=\"step\" :class=\"b.bill_status >= 3 ? 'completed' : ''\">\n                            <div class=\"step-icon-wrap\">\n                                <div class=\"step-icon\"><i class=\"fa-solid fa-list-check\"></i></div>\n                            </div>\n                            <h4 class=\"step-title\">Checking</h4>\n                        </div>\n                        <div class=\"step\" :class=\"b.bill_status >= 4 ? 'completed' : ''\">\n                            <div class=\"step-icon-wrap\">\n                                <div class=\"step-icon\"><i class=\"fa-solid fa-route\"></i></div>\n                            </div>\n                            <h4 class=\"step-title\">Delivering</h4>\n                        </div>\n                        <div class=\"step\" :class=\"b.bill_status >= 5 ? 'completed' : ''\">\n                            <div class=\"step-icon-wrap\">\n                                <div class=\"step-icon\"><i class=\"fa-solid fa-house\"></i></div>\n                            </div>\n                            <h4 class=\"step-title\">Delivered</h4>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n\n\n        <div v-else class=\"box-content row no-food\">\n            <div class=\"content\">\n                <h2 style=\"color: #057835fa;\">You do not have any orders yet</h2>\n            </div>\n            <div>\n                <img src=\"../assets/images/no-orders.png\" alt=\"\" />\n            </div>\n            <router-link class=\"btn\" to=\"/menu\">Order now!</router-link>\n        </div>\n\n        <OrderDetails v-if=\"showOrderDetails\" :bill=\"sendId\">\n            <button class=\"btn\" @click=\"closeView\">X</button>\n        </OrderDetails>\n    </div>\n\n</template>\n\n\n<script>\nimport OrderDetails from \"@/components/OrderDetails.vue\";\nimport axios from \"axios\";\nimport { mapState } from \"vuex\";\nexport default {\n    name: 'MyOrder',\n\n    data() {\n        return {\n            avaiableStatus: [\"cancel\", \"confirmed\", \"preparing\", \"checking\", \"delivering\", \"delivered\"],\n            allBills: [],\n\n            showOrderDetails: false,\n            sendId: null,\n\n            interval: \"\",\n        }\n    },\n\n    // created() {\n    //     this.getAllBills();\n    // },\n\n    mounted: function () {\n        this.getAllBills();\n\n        this.autoUpdate();\n    },\n\n    beforeUnmount() {\n        clearInterval(this.interval)\n    },\n\n    computed: {\n        ...mapState([\"allFoods\", \"user\"]),\n\n        filterBills: function () {\n            return this.allBills.filter((b) => b.bill_status < 6 && b.bill_status > 0);\n        },\n    },\n\n    methods: {\n        async getAllBills() {\n            if (this.user) {\n                this.allBills = (await axios.get('/billstatus/user/' + this.user.user_id)).data;\n            }\n        },\n\n        sendBillId: function (id) {\n            this.sendId = id\n            this.showOrderDetails = !this.showOrderDetails;\n        },\n\n        closeView: function () {\n            this.showOrderDetails = !this.showOrderDetails;\n        },\n\n        autoUpdate: function () {\n            this.interval = setInterval(function () {\n                this.getAllBills();\n            }.bind(this), 1000);\n        }\n    },\n    components: { OrderDetails }\n}\n</script>\n\n<style scoped>\n.my-order-container {\n    padding: 2rem 9%;\n    background: #fff;\n    height: 100%;\n}\n\n.my-order-container.fit-screen {\n    height: 90vh;\n}\n\n.my-order-cards {\n    margin-bottom: 2rem;\n}\n\n.card {\n    margin-bottom: 3px;\n}\n\n.card-head {\n    padding: 12px 0px;\n    color: white;\n    font-size: 16px;\n    background: #27ae60;\n\n}\n\n.card-head span:first-of-type {\n    margin-left: 20px;\n}\n\n.card-head button {\n    background-color: inherit;\n    color: white;\n    margin-right: 20px;\n    font-weight: 500;\n}\n\n.card-head button:hover {\n    color: #f38609;\n}\n\n.card-summary {\n    padding: 12px 10px;\n    background: #eee;\n    font-size: 14px;\n}\n\n.steps .step {\n    display: block;\n    width: 100%;\n    margin-bottom: 35px;\n    text-align: center\n}\n\n.steps .step .step-icon-wrap {\n    display: block;\n    position: relative;\n    width: 100%;\n    height: 80px;\n    text-align: center\n}\n\n.steps .step .step-icon-wrap::before,\n.steps .step .step-icon-wrap::after {\n    display: block;\n    position: absolute;\n    top: 50%;\n    width: 50%;\n    height: 3px;\n    margin-top: -1px;\n    background-color: #e1e7ec;\n    content: '';\n    z-index: 1\n}\n\n.steps .step .step-icon-wrap::before {\n    left: 0\n}\n\n.steps .step .step-icon-wrap::after {\n    right: 0\n}\n\n.steps .step .step-icon {\n    display: inline-block;\n    position: relative;\n    width: 80px;\n    height: 80px;\n    border: 1px solid #e1e7ec;\n    border-radius: 50%;\n    background-color: #f5f5f5;\n    color: #374250;\n    font-size: 38px;\n    line-height: 81px;\n    z-index: 5\n}\n\n.steps .step .step-title {\n    margin-top: 16px;\n    margin-bottom: 0;\n    color: #606975;\n    font-size: 14px;\n    font-weight: 500\n}\n\n.steps .step:first-child .step-icon-wrap::before {\n    display: none\n}\n\n.steps .step:last-child .step-icon-wrap::after {\n    display: none\n}\n\n.steps .step.completed .step-icon-wrap::before,\n.steps .step.completed .step-icon-wrap::after {\n    background-color: #0da9ef\n}\n\n.steps .step.completed .step-icon {\n    border-color: #0da9ef;\n    background-color: #0da9ef;\n    color: #fff\n}\n\n.no-food {\n    text-align: center;\n    justify-content: center;\n    display: block;\n    width: 100%;\n    height: 100%;\n    margin: auto;\n}\n\n.no-food a {\n    margin-top: 20px;\n    margin-left: -10px;\n}\n\n@media (max-width: 320px) {\n    .my-order-container {\n        padding: 0px;\n    }\n\n    .card-head {\n        font-size: 14px;\n    }\n\n    .no-food .content h2 {\n        font-size: 14px;\n    }\n\n\n}\n\n@media (max-width: 576px) {\n    .my-order-container {\n        padding: 1rem 4.5%;\n    }\n\n    .flex-sm-nowrap .step .step-icon-wrap::before,\n    .flex-sm-nowrap .step .step-icon-wrap::after {\n        display: none\n    }\n\n    .card {\n        margin-top: 20px;\n    }\n\n    .no-food div img {\n        width: 85vw;\n    }\n}\n\n@media (max-width: 768px) {\n\n    .flex-md-nowrap .step .step-icon-wrap::before,\n    .flex-md-nowrap .step .step-icon-wrap::after {\n        display: none\n    }\n}\n\n@media (max-width: 991px) {\n\n    .flex-lg-nowrap .step .step-icon-wrap::before,\n    .flex-lg-nowrap .step .step-icon-wrap::after {\n        display: none\n    }\n}\n\n@media (max-width: 1200px) {\n\n    .flex-xl-nowrap .step .step-icon-wrap::before,\n    .flex-xl-nowrap .step .step-icon-wrap::after {\n        display: none\n    }\n}\n\n.bg-faded,\n.bg-secondary {\n    background-color: #f5f5f5 !important;\n}\n</style>"],"mappings":";;AAsFA,OAAOA,YAAW,MAAO,+BAA+B;AACxD,OAAOC,KAAI,MAAO,OAAO;AACzB,SAASC,QAAO,QAAS,MAAM;AAC/B,eAAe;EACXC,IAAI,EAAE,SAAS;EAEfC,IAAIA,CAAA,EAAG;IACH,OAAO;MACHC,cAAc,EAAE,CAAC,QAAQ,EAAE,WAAW,EAAE,WAAW,EAAE,UAAU,EAAE,YAAY,EAAE,WAAW,CAAC;MAC3FC,QAAQ,EAAE,EAAE;MAEZC,gBAAgB,EAAE,KAAK;MACvBC,MAAM,EAAE,IAAI;MAEZC,QAAQ,EAAE;IACd;EACJ,CAAC;EAED;EACA;EACA;;EAEAC,OAAO,EAAE,SAAAA,CAAA,EAAY;IACjB,IAAI,CAACC,WAAW,CAAC,CAAC;IAElB,IAAI,CAACC,UAAU,CAAC,CAAC;EACrB,CAAC;EAEDC,aAAaA,CAAA,EAAG;IACZC,aAAa,CAAC,IAAI,CAACL,QAAQ;EAC/B,CAAC;EAEDM,QAAQ,EAAE;IACN,GAAGb,QAAQ,CAAC,CAAC,UAAU,EAAE,MAAM,CAAC,CAAC;IAEjCc,WAAW,EAAE,SAAAA,CAAA,EAAY;MACrB,OAAO,IAAI,CAACV,QAAQ,CAACW,MAAM,CAAEC,CAAC,IAAKA,CAAC,CAACC,WAAU,GAAI,KAAKD,CAAC,CAACC,WAAU,GAAI,CAAC,CAAC;IAC9E;EACJ,CAAC;EAEDC,OAAO,EAAE;IACL,MAAMT,WAAWA,CAAA,EAAG;MAChB,IAAI,IAAI,CAACU,IAAI,EAAE;QACX,IAAI,CAACf,QAAO,GAAI,CAAC,MAAML,KAAK,CAACqB,GAAG,CAAC,mBAAkB,GAAI,IAAI,CAACD,IAAI,CAACE,OAAO,CAAC,EAAEnB,IAAI;MACnF;IACJ,CAAC;IAEDoB,UAAU,EAAE,SAAAA,CAAUC,EAAE,EAAE;MACtB,IAAI,CAACjB,MAAK,GAAIiB,EAAC;MACf,IAAI,CAAClB,gBAAe,GAAI,CAAC,IAAI,CAACA,gBAAgB;IAClD,CAAC;IAEDmB,SAAS,EAAE,SAAAA,CAAA,EAAY;MACnB,IAAI,CAACnB,gBAAe,GAAI,CAAC,IAAI,CAACA,gBAAgB;IAClD,CAAC;IAEDK,UAAU,EAAE,SAAAA,CAAA,EAAY;MACpB,IAAI,CAACH,QAAO,GAAIkB,WAAW,CAAC,YAAY;QACpC,IAAI,CAAChB,WAAW,CAAC,CAAC;MACtB,CAAC,CAACiB,IAAI,CAAC,IAAI,CAAC,EAAE,IAAI,CAAC;IACvB;EACJ,CAAC;EACDC,UAAU,EAAE;IAAE7B;EAAa;AAC/B","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}